<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【dotnet】EF Core | Iewihc Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="alternate" type="application/rss+xml" href="https://example.vuepress-theme-blog.ulivz.com/rss.xml" title="Iewihc Blog RSS Feed">
    <meta name="description" content="
1.Tools
dotnet add package Microsoft.EntityFrameworkCore.Tools --version 5.0.6

2.選擇資料庫

SqlServer

dotnet add package Microsoft.EntityFrameworkCore.SqlServer --version 5.0.6 ...">
    
    <link rel="preload" href="/assets/css/0.styles.d7390708.css" as="style"><link rel="preload" href="/assets/js/app.988d5f8d.js" as="script"><link rel="preload" href="/assets/js/8.902400a9.js" as="script"><link rel="preload" href="/assets/js/3.3af5ea44.js" as="script"><link rel="preload" href="/assets/js/35.ec09210d.js" as="script"><link rel="preload" href="/assets/js/5.bf6edff1.js" as="script"><link rel="preload" href="/assets/js/9.70fb0595.js" as="script"><link rel="prefetch" href="/assets/js/10.db6760f8.js"><link rel="prefetch" href="/assets/js/11.f6d2fb21.js"><link rel="prefetch" href="/assets/js/12.5412c933.js"><link rel="prefetch" href="/assets/js/13.7b46b517.js"><link rel="prefetch" href="/assets/js/14.0fd61c84.js"><link rel="prefetch" href="/assets/js/15.a790a749.js"><link rel="prefetch" href="/assets/js/16.fa37ee10.js"><link rel="prefetch" href="/assets/js/17.165ea269.js"><link rel="prefetch" href="/assets/js/18.de0a397b.js"><link rel="prefetch" href="/assets/js/19.b23a28ce.js"><link rel="prefetch" href="/assets/js/20.7bd467a0.js"><link rel="prefetch" href="/assets/js/21.6a3349bb.js"><link rel="prefetch" href="/assets/js/22.ae9d52af.js"><link rel="prefetch" href="/assets/js/23.bcc4a281.js"><link rel="prefetch" href="/assets/js/24.c04c606b.js"><link rel="prefetch" href="/assets/js/25.a37d0b48.js"><link rel="prefetch" href="/assets/js/26.7e8a9c19.js"><link rel="prefetch" href="/assets/js/27.7ae51f36.js"><link rel="prefetch" href="/assets/js/28.3cf5f8ae.js"><link rel="prefetch" href="/assets/js/29.684a2bf3.js"><link rel="prefetch" href="/assets/js/30.fe78df7f.js"><link rel="prefetch" href="/assets/js/31.67410ce8.js"><link rel="prefetch" href="/assets/js/32.1a4b02a8.js"><link rel="prefetch" href="/assets/js/33.340de4d5.js"><link rel="prefetch" href="/assets/js/34.ac4e4280.js"><link rel="prefetch" href="/assets/js/36.93e18e05.js"><link rel="prefetch" href="/assets/js/37.daebde10.js"><link rel="prefetch" href="/assets/js/4.0ed27962.js"><link rel="prefetch" href="/assets/js/6.293f809a.js"><link rel="prefetch" href="/assets/js/7.7df757b7.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.b02a93cb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d7390708.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">Iewihc Blog </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Iewihc Blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        【dotnet】EF Core
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">iewihc</span> <span itemprop="address">   in tw</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2018-11-7">
      Wed Nov 07 2018
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-450235f2><a href="/tag/dotnet" data-v-450235f2><span data-v-450235f2>dotnet</span></a></li><li class="post-tag" data-v-450235f2><a href="/tag/ef" data-v-450235f2><span data-v-450235f2>ef</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h1 id="ef-core-安裝"><a href="#ef-core-安裝" class="header-anchor">#</a> EF-Core 安裝</h1> <h1 id="_1-tools"><a href="#_1-tools" class="header-anchor">#</a> 1.Tools</h1> <div class="language-sh extra-class"><pre class="language-sh"><code>dotnet <span class="token function">add</span> package Microsoft.EntityFrameworkCore.Tools --version <span class="token number">5.0</span>.6
</code></pre></div><h1 id="_2-選擇資料庫"><a href="#_2-選擇資料庫" class="header-anchor">#</a> 2.選擇資料庫</h1> <h3 id="sqlserver"><a href="#sqlserver" class="header-anchor">#</a> SqlServer</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>dotnet <span class="token function">add</span> package Microsoft.EntityFrameworkCore.SqlServer --version <span class="token number">5.0</span>.6
</code></pre></div><h3 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>dotnet <span class="token function">add</span> package Pomelo.EntityFrameworkCore.MySql --version <span class="token number">5.0</span>.0
</code></pre></div><h1 id="_3-design"><a href="#_3-design" class="header-anchor">#</a> 3.Design</h1> <div class="language-sh extra-class"><pre class="language-sh"><code>dotnet <span class="token function">add</span> package Microsoft.EntityFrameworkCore.Design --version <span class="token number">5.0</span>.6
</code></pre></div><hr> <h1 id="scaffold"><a href="#scaffold" class="header-anchor">#</a> Scaffold</h1> <div class="language-sh extra-class"><pre class="language-sh"><code>dotnet ef dbcontext scaffold <span class="token string">&quot;Server=.\SQLEXPRESS;Database=SchoolDB;Trusted_Connection=True;&quot;</span> Microsoft.EntityFrameworkCore.SqlServer -o Models 
</code></pre></div><div class="language-c# extra-class"><pre class="language-text"><code>  var test = new PromotionTop();
                test.Id = &quot;1&quot;;
                test.Name = &quot;3030&quot;;
                var test2 = new PromotionTop();
                test2.InjectFrom(new LoopInjection(new[] {&quot;Name&quot;}), test);
                var test2Id = test2.Id;
                var test2name = test2.Name;
</code></pre></div><hr> <h1 id="github-sample"><a href="#github-sample" class="header-anchor">#</a> Github Sample</h1> <p><a href="https://github.com/iewihc/EF-Code-First-Sample" target="_blank" rel="noopener noreferrer">EF-Core-First-Sample<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-sh extra-class"><pre class="language-sh"><code>dotnet ef migrations <span class="token function">add</span> InitialCreate // 創建遷移指令
dotnet ef database update // 利用上面所創的遷移更新
</code></pre></div><h1 id="一對一關係"><a href="#一對一關係" class="header-anchor">#</a> 一對一關係</h1> <p>e.g. 一張書桌對應一個學生</p> <h2 id="c-class-should-be"><a href="#c-class-should-be" class="header-anchor">#</a> C# Class Should Be</h2> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Desk</span>
<span class="token punctuation">{</span>
　　<span class="token keyword">public</span> <span class="token keyword">int</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
　　<span class="token keyword">public</span> <span class="token keyword">string</span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
　　
　　<span class="token keyword">public</span> <span class="token class-name">Student</span> Student <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span>
<span class="token punctuation">{</span>
　　<span class="token keyword">public</span> <span class="token keyword">int</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
　　<span class="token keyword">public</span> <span class="token keyword">string</span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
　　<span class="token keyword">public</span> <span class="token keyword">int</span> DeskID <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
　　
　　<span class="token keyword">public</span> <span class="token class-name">Desk</span> Desk <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">OnModelCreating</span><span class="token punctuation">(</span><span class="token class-name">ModelBuilder</span> modelBuilder<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
     modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasOne</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>Desk<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">WithOne</span><span class="token punctuation">(</span>b <span class="token operator">=&gt;</span> b<span class="token punctuation">.</span>Student<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">HasForeignKey</span><span class="token punctuation">&lt;</span><span class="token class-name">Desk</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>b <span class="token operator">=&gt;</span> b<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="sql-server-should-be"><a href="#sql-server-should-be" class="header-anchor">#</a> SQL Server Should Be</h2> <h3 id="desk"><a href="#desk" class="header-anchor">#</a> Desk</h3> <table><thead><tr><th>Id</th> <th>Name</th></tr></thead> <tbody><tr><td>1001</td> <td>WeiDesk</td></tr> <tr><td>2002</td> <td>LeeDesk</td></tr></tbody></table> <h3 id="desk-而言"><a href="#desk-而言" class="header-anchor">#</a> Desk 而言</h3> <p>(PK) : <code>ID</code></p> <h3 id="student"><a href="#student" class="header-anchor">#</a> Student</h3> <table><thead><tr><th>Id</th> <th>Name</th> <th>DeskID(FK)</th></tr></thead> <tbody><tr><td>1</td> <td>Wei</td> <td>1001</td></tr> <tr><td>2</td> <td>Lee</td> <td>2002</td></tr></tbody></table> <h3 id="student-而言"><a href="#student-而言" class="header-anchor">#</a> Student 而言</h3> <p>(PK) : <code>ID</code></p> <p>(FK) : <code>DeskID</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> Student
	<span class="token keyword">add</span> <span class="token keyword">constraint</span> FK_Students_Desk_DeskID
		<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>DeskID<span class="token punctuation">)</span> <span class="token keyword">references</span> Desk
</code></pre></div><hr> <h1 id="一對多關係"><a href="#一對多關係" class="header-anchor">#</a> 一對多關係</h1> <p>e.g. 一間學校有多個老師</p> <h2 id="c-class-should-be-2"><a href="#c-class-should-be-2" class="header-anchor">#</a> C# Class Should Be</h2> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">School</span>
<span class="token punctuation">{</span>
　　<span class="token keyword">public</span> <span class="token keyword">int</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
　　<span class="token keyword">public</span> <span class="token keyword">string</span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
　　
   <span class="token keyword">public</span> ICollection<span class="token operator">&lt;</span>Teacher<span class="token operator">&gt;</span> Teachers <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span>
<span class="token punctuation">{</span>
　　<span class="token keyword">public</span> <span class="token keyword">int</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
　　<span class="token keyword">public</span> <span class="token keyword">string</span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
　　<span class="token keyword">public</span> <span class="token keyword">int</span> SchooldId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
　　<span class="token keyword">public</span> <span class="token class-name">School</span> School <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code>
<span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">OnModelCreating</span><span class="token punctuation">(</span><span class="token class-name">ModelBuilder</span> modelBuilder<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
      modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token punctuation">&lt;</span><span class="token class-name">School</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasMany</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Teachers<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">WithOne</span><span class="token punctuation">(</span>e <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>School<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="sql-server-should-be-2"><a href="#sql-server-should-be-2" class="header-anchor">#</a> SQL Server Should Be</h2> <h3 id="teacher-多方"><a href="#teacher-多方" class="header-anchor">#</a> Teacher(多方)</h3> <table><thead><tr><th>Id</th> <th>Name</th> <th>SchoolId(FK)</th></tr></thead> <tbody><tr><td>1</td> <td>林老師</td> <td>A01</td></tr> <tr><td>2</td> <td>王老師</td> <td>B01</td></tr></tbody></table> <h3 id="teacher而言"><a href="#teacher而言" class="header-anchor">#</a> Teacher而言</h3> <p>(PK) : <code>ID</code></p> <p>(FK): <code>SchoolID</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> Teacher
	<span class="token keyword">add</span> <span class="token keyword">constraint</span> FK_Teacher_School_SchoolId
		<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>SchoolId<span class="token punctuation">)</span> <span class="token keyword">references</span> School <span class="token punctuation">(</span>Id<span class="token punctuation">)</span>
</code></pre></div><h3 id="school-一方"><a href="#school-一方" class="header-anchor">#</a> School(一方)</h3> <table><thead><tr><th>Id</th> <th>Name</th></tr></thead> <tbody><tr><td>A01</td> <td>常春藤大學</td></tr> <tr><td>B01</td> <td>台北大學</td></tr></tbody></table> <hr> <h1 id="多對多關係"><a href="#多對多關係" class="header-anchor">#</a> 多對多關係</h1> <p>班級和老師的關係 (老師可以去多個班級任教)
實現: 需使用獨立一張表實現</p> <h2 id="c-classm-should-be"><a href="#c-classm-should-be" class="header-anchor">#</a> C# Classm Should Be</h2> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span>
<span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> TeacherId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> IEnumerable<span class="token operator">&lt;</span>TeacherClassRoom<span class="token operator">&gt;</span> ClassRooms <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassRoom</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> ClassRoomId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> CategoryName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> IEnumerable<span class="token operator">&lt;</span>TeacherClassRoom<span class="token operator">&gt;</span> Teachers <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TeacherClassRoom</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> TeacherId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Teacher</span> Teacher <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> ClassRoomId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">ClassRoom</span> ClassRoom <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code>  <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">OnModelCreating</span><span class="token punctuation">(</span><span class="token class-name">ModelBuilder</span> modelBuilder<span class="token punctuation">)</span>
        <span class="token punctuation">{</span> 
            modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token punctuation">&lt;</span><span class="token class-name">TeacherClassRoom</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasKey</span><span class="token punctuation">(</span>bc <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> bc<span class="token punctuation">.</span>TeacherId<span class="token punctuation">,</span> bc<span class="token punctuation">.</span>ClassRoomId <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token punctuation">&lt;</span><span class="token class-name">TeacherClassRoom</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasOne</span><span class="token punctuation">(</span>bc <span class="token operator">=&gt;</span> bc<span class="token punctuation">.</span>Teacher<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">WithMany</span><span class="token punctuation">(</span>b <span class="token operator">=&gt;</span> b<span class="token punctuation">.</span>ClassRooms<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasForeignKey</span><span class="token punctuation">(</span>bc <span class="token operator">=&gt;</span> bc<span class="token punctuation">.</span>TeacherId<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token punctuation">&lt;</span><span class="token class-name">TeacherClassRoom</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasOne</span><span class="token punctuation">(</span>bc <span class="token operator">=&gt;</span> bc<span class="token punctuation">.</span>ClassRoom<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">WithMany</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Teachers<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasForeignKey</span><span class="token punctuation">(</span>bc <span class="token operator">=&gt;</span> bc<span class="token punctuation">.</span>ClassRoomId<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
</code></pre></div><h2 id="sql-server-should-be-3"><a href="#sql-server-should-be-3" class="header-anchor">#</a> SQL Server Should Be</h2> <h3 id="teacher-教師表"><a href="#teacher-教師表" class="header-anchor">#</a> Teacher (教師表)</h3> <table><thead><tr><th>Id</th> <th>Name</th></tr></thead> <tbody><tr><td>1</td> <td>林老師</td></tr> <tr><td>2</td> <td>王老師</td></tr></tbody></table> <h3 id="classroom-班級表"><a href="#classroom-班級表" class="header-anchor">#</a> ClassRoom (班級表)</h3> <table><thead><tr><th>Id</th> <th>Name</th></tr></thead> <tbody><tr><td>C01</td> <td>三年一班</td></tr> <tr><td>C02</td> <td>三年二班</td></tr></tbody></table> <h3 id="classroomteacher-班級教師表"><a href="#classroomteacher-班級教師表" class="header-anchor">#</a> ClassRoomTeacher (班級教師表)</h3> <table><thead><tr><th>TeacherId(PK)</th> <th>ClassRoomId(PK)</th></tr></thead> <tbody><tr><td>1</td> <td>C01</td></tr> <tr><td>2</td> <td>C02</td></tr></tbody></table> <h3 id="classroomteacher而言"><a href="#classroomteacher而言" class="header-anchor">#</a> ClassRoomTeacher而言</h3> <div class="language-SQL extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> TeacherClassRoom
<span class="token punctuation">(</span>
    TeacherId   <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span>
        <span class="token keyword">constraint</span> FK_TeacherClassRoom_Teacher_TeacherId
            <span class="token keyword">references</span> Teacher
            <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">cascade</span><span class="token punctuation">,</span>
    ClassRoomId <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span>
        <span class="token keyword">constraint</span> FK_TeacherClassRoom_ClassRoom_ClassRoomId
            <span class="token keyword">references</span> ClassRoom
            <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">cascade</span><span class="token punctuation">,</span>
    <span class="token keyword">constraint</span> PK_TeacherClassRoom
        <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>TeacherId<span class="token punctuation">,</span> ClassRoomId<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
go

<span class="token keyword">create</span> <span class="token keyword">index</span> IX_TeacherClassRoom_ClassRoomId
    <span class="token keyword">on</span> TeacherClassRoom <span class="token punctuation">(</span>ClassRoomId<span class="token punctuation">)</span>
go

</code></pre></div></div> <footer><form class="newsletter"><div class="newsletter__wrap"><div class="newsletter__title">Newsletter</div> <div class="newsletter__content">Subscribe to get my lastest content. No spam.</div> <div class="newsletter__fields"><input type="email" name="email" aria-label="Email" placeholder="Email" required="required" autocapitalize="off" autocorrect="off" data-cy="email" value="" class="newsletter__input"> <button type="submit" data-cy="submit" class="newsletter__button">
        Subscribe
      </button></div></div></form> <hr> <!----></footer></article></div></div> <footer class="footer" data-v-4f6150ea><div class="footer-left-wrap" data-v-4f6150ea><ul class="contact" data-v-4f6150ea><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-codepen" data-v-4f6150ea><polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2" data-v-4f6150ea></polygon><line x1="12" y1="22" x2="12" y2="15.5" data-v-4f6150ea></line><polyline points="22 8.5 12 15.5 2 8.5" data-v-4f6150ea></polyline><polyline points="2 15.5 12 8.5 22 15.5" data-v-4f6150ea></polyline><line x1="12" y1="2" x2="12" y2="8.5" data-v-4f6150ea></line></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-codesandbox" data-v-4f6150ea><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" data-v-4f6150ea></path><polyline points="7.5 4.21 12 6.81 16.5 4.21" data-v-4f6150ea></polyline><polyline points="7.5 19.79 7.5 14.6 3 12" data-v-4f6150ea></polyline><polyline points="21 12 16.5 14.6 16.5 19.79" data-v-4f6150ea></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96" data-v-4f6150ea></polyline><line x1="12" y1="22.08" x2="12" y2="12" data-v-4f6150ea></line></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-facebook" data-v-4f6150ea><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" data-v-4f6150ea></path></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="https://github.com/vuepressjs/vuepress-theme-blog" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-4f6150ea><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-4f6150ea></path></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-gitlab" data-v-4f6150ea><path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z" data-v-4f6150ea></path></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-instagram" data-v-4f6150ea><rect x="2" y="2" width="20" height="20" rx="5" ry="5" data-v-4f6150ea></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" data-v-4f6150ea></path><line x1="17.5" y1="6.5" x2="17.5" y2="6.5" data-v-4f6150ea></line></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin" data-v-4f6150ea><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z" data-v-4f6150ea></path><rect x="2" y="9" width="4" height="12" data-v-4f6150ea></rect><circle cx="4" cy="4" r="2" data-v-4f6150ea></circle></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail" data-v-4f6150ea><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-4f6150ea></path><polyline points="22,6 12,13 2,6" data-v-4f6150ea></polyline></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-square" data-v-4f6150ea><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-4f6150ea></path></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-music" data-v-4f6150ea><path d="M9 18V5l12-2v13" data-v-4f6150ea></path><circle cx="6" cy="18" r="3" data-v-4f6150ea></circle><circle cx="18" cy="16" r="3" data-v-4f6150ea></circle></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-phone" data-v-4f6150ea><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" data-v-4f6150ea></path></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="https://twitter.com/vuepressjs" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-4f6150ea><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-4f6150ea></path></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-video" data-v-4f6150ea><polygon points="23 7 16 12 23 17 23 7" data-v-4f6150ea></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2" data-v-4f6150ea></rect></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-globe" data-v-4f6150ea><circle cx="12" cy="12" r="10" data-v-4f6150ea></circle><line x1="2" y1="12" x2="22" y2="12" data-v-4f6150ea></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" data-v-4f6150ea></path></svg>
          
        </a></li><li class="contact-item" data-v-4f6150ea><a href="/" class="nav-link" data-v-4f6150ea><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-youtube" data-v-4f6150ea><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z" data-v-4f6150ea></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02" data-v-4f6150ea></polygon></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-4f6150ea><ul class="copyright" data-v-4f6150ea><li class="copyright-item" data-v-4f6150ea><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-4f6150ea>Privacy Policy</a></li><li class="copyright-item" data-v-4f6150ea>MIT Licensed | Copyright © 2018-present Vue.js</li></ul></div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.988d5f8d.js" defer></script><script src="/assets/js/8.902400a9.js" defer></script><script src="/assets/js/3.3af5ea44.js" defer></script><script src="/assets/js/35.ec09210d.js" defer></script><script src="/assets/js/5.bf6edff1.js" defer></script><script src="/assets/js/9.70fb0595.js" defer></script>
  </body>
</html>
